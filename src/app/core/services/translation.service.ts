import { Injectable, model, signal } from '@angular/core';

export interface Translation {
  [key: string]: string | Translation;
}

export type SupportedLanguage = 'en' | 'ar';

@Injectable({
  providedIn: 'root'
})
export class TranslationService {
  private currentLanguage = signal<SupportedLanguage>('en');
  private translations: Record<SupportedLanguage, Translation> = {
    en: {
      // Navigation
      nav: {
        dashboard: 'Dashboard',
        admin: 'Admin',
        users: 'Users',
        reports: 'Reports',
        logout: 'Logout',
        branches: 'Branches',
        vehicles: 'Vehicles',
        bookings: 'Bookings',
        customers: 'Customers',
        services: 'Additional Services',
        adminUsers: 'Admin Users'
      },
      // Login Page
      login: {
        title: 'NOL Dashboard',
        subtitle: 'Sign in to your account',
        email: 'Email',
        password: 'Password',
        signIn: 'Sign In',
        signingIn: 'Signing in...',
        showPassword: 'Show password',
        hidePassword: 'Hide password',
        emailRequired: 'Email is required',
        emailInvalid: 'Please enter a valid email',
        passwordRequired: 'Password is required',
        demoCredentials: 'Demo Credentials:',
        admin: 'Admin',
        user: 'User',
        manager: 'Manager'
      },
      // Users Management
      users: {
        title: 'User Management',
        subtitle: 'Manage user accounts and permissions',
        addNewUser: 'Add New User',
        exportUsers: 'Export Users',
        name: 'Name',
        email: 'Email',
        role: 'Role',
        status: 'Status',
        actions: 'Actions',
        edit: 'Edit',
        disable: 'Disable',
        active: 'Active',
        inactive: 'Inactive',
        adminUser: 'Admin User',
        managerUser: 'Manager User',
        regularUser: 'Regular User'
      },
      // Common
      common: {
        loading: 'Loading...',
        error: 'Error',
        success: 'Success',
        warning: 'Warning',
        info: 'Information',
        cancel: 'Cancel',
        save: 'Save',
        delete: 'Delete',
        confirm: 'Confirm',
        close: 'Close',
        refresh: 'Refresh',
        search: 'Search',
        filter: 'Filter',
        add: 'Add',
        edit: 'Edit',
        view: 'View',
        back: 'Back',
        next: 'Next',
        previous: 'Previous'
      },
      // Car Rental Dashboard
      dashboard: {
        title: 'NOL Car Rental Dashboard',
        subtitle: 'Manage your car rental business efficiently',
        totalVehicles: 'Total Vehicles',
        availableVehicles: 'Available Vehicles',
        activeBookings: 'Active Bookings',
        totalRevenue: 'Total Revenue',
        monthlyRevenue: 'Monthly Revenue',
        totalBranches: 'Total Branches',
        totalCustomers: 'Total Customers',
        maintenanceAlerts: 'Maintenance Alerts',
        quickActions: 'Quick Actions',
        addVehicle: 'Add Vehicle',
        addBranch: 'Add Branch',
        newBooking: 'New Booking',
        addService: 'Add Service',
        welcome: 'Welcome to Car Rental Dashboard',
        welcomeMessage: 'Manage your car rental business efficiently with our comprehensive dashboard.',
        manageBranches: 'Manage Branches',
        manageBranchesDesc: 'Add, edit, and manage rental branch locations',
        manageVehicles: 'Manage Vehicles',
        manageVehiclesDesc: 'Control your vehicle fleet and availability',
        manageBookings: 'Manage Bookings',
        manageBookingsDesc: 'Handle customer reservations and rentals',
        manageCustomers: 'Manage Customers',
        manageCustomersDesc: 'Maintain customer information and history'
      },
      // Branch Management
      branches: {
        title: 'Branch Management',
        subtitle: 'Manage car rental branches',
        addBranch: 'Add Branch',
        addFirstBranch: 'Add First Branch',
        editBranch: 'Edit Branch',
        branchDetails: 'Branch Details',
        searchPlaceholder: 'Search branches...',
        status: 'Status',
        city: 'City',
        allStatuses: 'All Statuses',
        allCities: 'All Cities',
        active: 'Active',
        inactive: 'Inactive',
        maintenance: 'Maintenance',
        showingResults: 'Showing',
        of: 'of',
        branches: 'branches',
        noBranchesFound: 'No branches found',
        noBranchesDescription: 'No branches match your search criteria',
        branchManager: 'Branch Manager',
        operatingHours: 'Operating Hours',
        name: 'Branch Name',
        address: 'Address',
        phone: 'Phone',
        email: 'Email',
        manager: 'Manager',
        country: 'Country',
        coordinates: 'Coordinates',
        latitude: 'Latitude',
        longitude: 'Longitude',
        monday: 'Monday',
        tuesday: 'Tuesday',
        wednesday: 'Wednesday',
        thursday: 'Thursday',
        friday: 'Friday',
        saturday: 'Saturday',
        sunday: 'Sunday',
        isOpen: 'Open',
        openTime: 'Open Time',
        closeTime: 'Close Time',
        getCurrentLocation: 'Get Current Location',
        mapInstructions: 'Click on the map to set location'
      },
      // Vehicle Management
      vehicles: {
        title: 'Vehicle Management',
        subtitle: 'Manage rental fleet vehicles',
        addVehicle: 'Add Vehicle',
        addFirstVehicle: 'Add First Vehicle',
        editVehicle: 'Edit Vehicle',
        vehicleDetails: 'Vehicle Details',
        searchPlaceholder: 'Search vehicles...',
        category: 'Category',
        status: 'Status',
        make: 'Make',
        allCategories: 'All Categories',
        allStatuses: 'All Statuses',
        allMakes: 'All Makes',
        economy: 'Economy',
        compact: 'Compact',
        midsize: 'Midsize',
        fullsize: 'Full Size',
        luxury: 'Luxury',
        suv: 'SUV',
        van: 'Van',
        truck: 'Truck',
        available: 'Available',
        rented: 'Rented',
        maintenance: 'Maintenance',
        outOfService: 'Out of Service',
        reserved: 'Reserved',
        showingResults: 'Showing',
        of: 'of',
        vehicles: 'vehicles',
        noVehiclesFound: 'No vehicles found',
        noVehiclesDescription: 'No vehicles match your search criteria',
        gasoline: 'Gasoline',
        diesel: 'Diesel',
        electric: 'Electric',
        hybrid: 'Hybrid',
        manual: 'Manual',
        automatic: 'Automatic',
        seats: 'seats',
        miles: 'miles',
        dailyRate: 'Daily Rate',
        weeklyRate: 'Weekly Rate',
        monthlyRate: 'Monthly Rate',
        formComingSoon: 'Vehicle Form Coming Soon',
        formComingSoonDesc: 'The vehicle form is under development and will be available soon.',
        detailComingSoon: 'Vehicle Details Coming Soon',
        detailComingSoonDesc: 'The vehicle detail view is under development and will be available soon.',
        addVehicleDesc: 'Add a new vehicle to your rental fleet',
        vehicleDetailsDesc: 'View detailed information about this vehicle',
        editVehicleDesc: 'Update vehicle information and specifications',
        basicInformation: 'Basic Information',
        basicInformationDesc: 'Enter the basic details about the vehicle',
        identification: 'Identification',
        identificationDesc: 'Vehicle identification numbers and registration',
        specifications: 'Specifications',
        specificationsDesc: 'Technical specifications and features',
        pricing: 'Pricing',
        pricingDesc: 'Set rental rates for different periods',
        documentation: 'Documentation',
        documentationDesc: 'Insurance and registration information',
        additionalInfo: 'Additional Information',
        additionalInfoDesc: 'Extra features and notes',
        makePlaceholder: 'e.g., Toyota, BMW, Mercedes',
        modelPlaceholder: 'e.g., Camry, X5, C-Class',
        yearPlaceholder: 'e.g., 2023',
        colorPlaceholder: 'e.g., White, Black, Silver',
        vinPlaceholder: '17-character VIN number',
        licensePlatePlaceholder: 'e.g., DXB-12345',
        seatsPlaceholder: 'Number of seats',
        doorsPlaceholder: 'Number of doors',
        mileagePlaceholder: 'Current mileage in km',
        dailyRatePlaceholder: 'Daily rental rate',
        weeklyRatePlaceholder: 'Weekly rental rate (optional)',
        monthlyRatePlaceholder: 'Monthly rental rate (optional)',
        featuresPlaceholder: 'GPS, Bluetooth, Leather seats, etc.',
        featuresHelp: 'Separate features with commas',
        notesPlaceholder: 'Additional notes about the vehicle',
        selectCategory: 'Select Category',
        selectBranch: 'Select Branch',
        selectFuelType: 'Select Fuel Type',
        selectTransmission: 'Select Transmission',
        insuranceExpiry: 'Insurance Expiry',
        registrationExpiry: 'Registration Expiry',
        branch: 'Branch',
        vin: 'VIN',
        doors: 'Doors',
        cvt: 'CVT',
        notes: 'Notes',
        model: 'Model',
        year: 'Year',
        color: 'Color',
        mileage: 'Mileage',
        licensePlate: 'License Plate',
        transmission: 'Transmission',
        fuelType: 'Fuel Type',
        features: 'Features',
        images: 'Images'

      },
      // Bookings Management
      bookings: {
        title: 'Booking Management',
        subtitle: 'Manage customer reservations and rentals',
        newBooking: 'New Booking',
        createFirstBooking: 'Create First Booking',
        editBooking: 'Edit Booking',
        bookingDetails: 'Booking Details',
        searchPlaceholder: 'Search bookings...',
        status: 'Status',
        payment: 'Payment',
        allStatuses: 'All Statuses',
        allPayments: 'All Payments',
        pending: 'Pending',
        confirmed: 'Confirmed',
        active: 'Active',
        completed: 'Completed',
        cancelled: 'Cancelled',
        no_show: 'No Show',
        paymentPending: 'Payment Pending',
        partial: 'Partial Payment',
        paid: 'Paid',
        refunded: 'Refunded',
        failed: 'Payment Failed',
        showingResults: 'Showing',
        of: 'of',
        bookings: 'bookings',
        noBookingsFound: 'No bookings found',
        noBookingsDescription: 'No bookings match your search criteria',
        bookingsList: 'Bookings List',
        calendar: 'Calendar',
        analytics: 'Analytics',
        totalAmount: 'Total Amount',
        duration: 'Duration',
        days: 'days',
        pickup: 'Pickup',
        dropoff: 'Dropoff',
        additionalServices: 'Additional Services',
        changeStatus: 'Change Status',
        confirm: 'Confirm',
        activate: 'Activate',
        complete: 'Complete',
        cancel: 'Cancel',
        calendarComingSoon: 'Calendar View Coming Soon',
        calendarComingSoonDesc: 'Calendar view for bookings is under development.',
        bookingOverview: 'Booking Overview',
        totalBookings: 'Total Bookings',
        activeBookings: 'Active Bookings',
        bookingStatus: 'Booking Status',
        revenue: 'Revenue',
        totalRevenue: 'Total Revenue',
        pendingPayments: 'Pending Payments',
        completion: 'Completion',
        newBookings: 'New Bookings',
        manageReservations: 'Manage Reservations',
        customerInfo: 'Customer Information',
        paymentTracking: 'Payment Tracking',
        formComingSoon: 'Booking Form Coming Soon',
        formComingSoonDesc: 'The booking form is under development and will be available soon.',
        detailComingSoon: 'Booking Details Coming Soon',
        detailComingSoonDesc: 'The booking detail view is under development and will be available soon.',
        newBookingDesc: 'Create a new rental booking',
        bookingDetailsDesc: 'View detailed information about this booking'
      },

      // Advertisement Management
      advertisements: {
        title: 'Advertisement Management',
        subtitle: 'Manage advertising campaigns and promotions',
        addAdvertisement: 'Add Advertisement',
        createFirstAdvertisement: 'Create First Advertisement',
        searchPlaceholder: 'Search advertisements...',
        type: 'Type',
        status: 'Status',
        allTypes: 'All Types',
        allStatuses: 'All Statuses',
        banner: 'Banner',
        popup: 'Popup',
        sidebar: 'Sidebar',
        featured: 'Featured',
        promotion: 'Promotion',
        draft: 'Draft',
        active: 'Active',
        paused: 'Paused',
        expired: 'Expired',
        archived: 'Archived',
        showingResults: 'Showing',
        of: 'of',
        advertisements: 'advertisements',
        noAdvertisementsFound: 'No advertisements found',
        noAdvertisementsDescription: 'No advertisements match your search criteria',
        duration: 'Duration',
        budget: 'Budget',
        targetUrl: 'Target URL',
        impressions: 'Impressions',
        clicks: 'Clicks',
        conversions: 'Conversions',
        ctr: 'CTR',
        targetAudience: 'Target Audience',
        years: 'years',
        male: 'Male',
        female: 'Female',
        activate: 'Activate',
        pause: 'Pause',
        resume: 'Resume',
        archive: 'Archive'
      },
      // Customer Management
      customers: {
        title: 'Customer Management',
        subtitle: 'Manage customer profiles and rental history',
        addCustomer: 'Add Customer',
        addFirstCustomer: 'Add First Customer',
        editCustomer: 'Edit Customer',
        customerDetails: 'Customer Details',
        searchPlaceholder: 'Search customers...',
        type: 'Type',
        status: 'Status',
        allTypes: 'All Types',
        allStatuses: 'All Statuses',
        regular: 'Regular',
        premium: 'Premium',
        corporate: 'Corporate',
        active: 'Active',
        inactive: 'Inactive',
        blacklisted: 'Blacklisted',
        showingResults: 'Showing',
        of: 'of',
        customers: 'customers',
        noCustomersFound: 'No customers found',
        noCustomersDescription: 'No customers match your search criteria',
        customerList: 'Customer List',
        analytics: 'Analytics',
        totalRentals: 'Total Rentals',
        totalSpent: 'Total Spent',
        loyaltyPoints: 'Loyalty Points',
        rating: 'Rating',
        license: 'License',
        location: 'Location',
        lastRental: 'Last Rental',
        member: 'Member Since',
        viewHistory: 'View History',
        activate: 'Activate',
        deactivate: 'Deactivate',
        addBlacklist: 'Add to Blacklist',
        removeBlacklist: 'Remove from Blacklist',
        rentalHistory: 'Rental History',
        noRentalHistory: 'No rental history available',
        days: 'days',
        completed: 'Completed',
        cancelled: 'Cancelled',
        customerOverview: 'Customer Overview',
        totalCustomers: 'Total Customers',
        activeCustomers: 'Active Customers',
        customerTypes: 'Customer Types',
        revenue: 'Revenue',
        totalRevenue: 'Total Revenue',
        averageSpent: 'Average Spent',
        issues: 'Issues',
        blacklistedCustomers: 'Blacklisted Customers',
        addCustomers: 'Add Customers',
        customerProfiles: 'Customer Profiles',
        contactInfo: 'Contact Information',
        formComingSoon: 'Customer Form Coming Soon',
        formComingSoonDesc: 'The customer form is under development and will be available soon.',
        detailComingSoon: 'Customer Details Coming Soon',
        detailComingSoonDesc: 'The customer detail view is under development and will be available soon.',
        addCustomerDesc: 'Add a new customer to the system',
        customerDetailsDesc: 'View detailed information about this customer'
      },
      // Additional Services
      services: {
        title: 'Additional Services',
        subtitle: 'Manage rental add-on services and equipment',
        addService: 'Add Service',
        addFirstService: 'Add First Service',
        editService: 'Edit Service',
        serviceDetails: 'Service Details',
        searchPlaceholder: 'Search services...',
        category: 'Category',
        availability: 'Availability',
        allCategories: 'All Categories',
        allAvailability: 'All Availability',
        navigation: 'Navigation',
        safety: 'Safety',
        comfort: 'Comfort',
        insurance: 'Insurance',
        equipment: 'Equipment',
        available: 'Available',
        unavailable: 'Unavailable',
        showingResults: 'Showing',
        of: 'of',
        services: 'services',
        noServicesFound: 'No services found',
        noServicesDescription: 'No services match your search criteria',
        maxQuantity: 'Max Quantity',
        units: 'units',
        dailyRate: 'Daily Rate',
        weeklyRate: 'Weekly Rate',
        monthlyRate: 'Monthly Rate',
        gpsNavigation: 'GPS Navigation',
        childSeats: 'Child Seats',
        formComingSoon: 'Service Form Coming Soon',
        formComingSoonDesc: 'The service form is under development and will be available soon.',
        detailComingSoon: 'Service Details Coming Soon',
        detailComingSoonDesc: 'The service detail view is under development and will be available soon.',
        addServiceDesc: 'Add a new additional service to your rental offerings',
        serviceDetailsDesc: 'View detailed information about this service'
      },
      // Admin Users
      adminUsers: {
        title: 'Admin User Management',
        subtitle: 'Manage administrative users and permissions',
        addAdmin: 'Add Admin',
        addFirstAdmin: 'Add First Admin',
        editAdmin: 'Edit Admin',
        adminDetails: 'Admin Details',
        searchPlaceholder: 'Search admin users...',
        role: 'Role',
        status: 'Status',
        allRoles: 'All Roles',
        allStatuses: 'All Statuses',
        superAdmin: 'Super Admin',
        branchManager: 'Branch Manager',
        staff: 'Staff',
        viewer: 'Viewer',
        active: 'Active',
        inactive: 'Inactive',
        showingResults: 'Showing',
        of: 'of',
        users: 'users',
        noUsersFound: 'No admin users found',
        noUsersDescription: 'No admin users match your search criteria',
        adminUsers: 'Admin Users',
        activityLogs: 'Activity Logs',
        lastLogin: 'Last Login',
        branches: 'Branches',
        allBranches: 'All Branches',
        joined: 'Joined',
        permissions: 'Permissions',
        noLogsFound: 'No activity logs found',
        noLogsDescription: 'No recent activity to display',
        addAdmins: 'Add Administrators',
        roleManagement: 'Role Management',
        formComingSoon: 'Admin Form Coming Soon',
        formComingSoonDesc: 'The admin user form is under development and will be available soon.',
        detailComingSoon: 'Admin Details Coming Soon',
        detailComingSoonDesc: 'The admin user detail view is under development and will be available soon.',
        addAdminDesc: 'Add a new administrative user to the system',
        adminDetailsDesc: 'View detailed information about this admin user',
        super_admin: 'Super Admin',
        branch_manager: 'Branch Manager'
      },

    },
    ar: {
      // التنقل
      nav: {
        dashboard: 'لوحة التحكم',
        admin: 'الإدارة',
        users: 'المستخدمين',
        reports: 'التقارير',
        logout: 'تسجيل الخروج',
        branches: 'الفروع',
        vehicles: 'المركبات',
        bookings: 'الحجوزات',
        customers: 'العملاء',
        services: 'الخدمات الإضافية',
        adminUsers: 'مستخدمي الإدارة'
      },
      // صفحة تسجيل الدخول
      login: {
        title: 'لوحة تحكم NOL',
        subtitle: 'سجل دخولك إلى حسابك',
        email: 'البريد الإلكتروني',
        password: 'كلمة المرور',
        signIn: 'تسجيل الدخول',
        signingIn: 'جاري تسجيل الدخول...',
        showPassword: 'إظهار كلمة المرور',
        hidePassword: 'إخفاء كلمة المرور',
        emailRequired: 'البريد الإلكتروني مطلوب',
        emailInvalid: 'يرجى إدخال بريد إلكتروني صحيح',
        passwordRequired: 'كلمة المرور مطلوبة',
        demoCredentials: 'بيانات تجريبية:',
        admin: 'مدير',
        user: 'مستخدم',
        manager: 'مدير قسم'
      },
      // إدارة المستخدمين
      users: {
        title: 'إدارة المستخدمين',
        subtitle: 'إدارة حسابات المستخدمين والصلاحيات',
        addNewUser: 'إضافة مستخدم جديد',
        exportUsers: 'تصدير المستخدمين',
        name: 'الاسم',
        email: 'البريد الإلكتروني',
        role: 'الدور',
        status: 'الحالة',
        actions: 'الإجراءات',
        edit: 'تعديل',
        disable: 'تعطيل',
        active: 'نشط',
        inactive: 'غير نشط',
        adminUser: 'مستخدم مدير',
        managerUser: 'مستخدم مدير قسم',
        regularUser: 'مستخدم عادي'
      },
      // عام
      common: {
        loading: 'جاري التحميل...',
        error: 'خطأ',
        success: 'نجح',
        warning: 'تحذير',
        info: 'معلومات',
        cancel: 'إلغاء',
        save: 'حفظ',
        delete: 'حذف',
        confirm: 'تأكيد',
        close: 'إغلاق',
        refresh: 'تحديث',
        search: 'بحث',
        filter: 'تصفية',
        add: 'إضافة',
        edit: 'تعديل',
        view: 'عرض',
        back: 'رجوع',
        next: 'التالي',
        previous: 'السابق'
      },
      // لوحة تحكم تأجير السيارات
      dashboard: {
        title: 'لوحة تحكم تأجير السيارات NOL',
        subtitle: 'إدارة أعمال تأجير السيارات بكفاءة',
        totalVehicles: 'إجمالي المركبات',
        availableVehicles: 'المركبات المتاحة',
        activeBookings: 'الحجوزات النشطة',
        totalRevenue: 'إجمالي الإيرادات',
        monthlyRevenue: 'الإيرادات الشهرية',
        totalBranches: 'إجمالي الفروع',
        totalCustomers: 'إجمالي العملاء',
        maintenanceAlerts: 'تنبيهات الصيانة',
        quickActions: 'إجراءات سريعة',
        addVehicle: 'إضافة مركبة',
        addBranch: 'إضافة فرع',
        newBooking: 'حجز جديد',
        addService: 'إضافة خدمة',
        welcome: 'مرحباً بك في لوحة تحكم تأجير السيارات',
        welcomeMessage: 'إدارة أعمال تأجير السيارات بكفاءة من خلال لوحة التحكم الشاملة.',
        manageBranches: 'إدارة الفروع',
        manageBranchesDesc: 'إضافة وتعديل وإدارة مواقع فروع التأجير',
        manageVehicles: 'إدارة المركبات',
        manageVehiclesDesc: 'التحكم في أسطول المركبات والتوفر',
        manageBookings: 'إدارة الحجوزات',
        manageBookingsDesc: 'التعامل مع حجوزات العملاء والتأجير',
        manageCustomers: 'إدارة العملاء',
        manageCustomersDesc: 'الاحتفاظ بمعلومات العملاء وتاريخهم'
      },
      // إدارة الفروع
      branches: {
        title: 'إدارة الفروع',
        subtitle: 'إدارة فروع تأجير السيارات',
        addBranch: 'إضافة فرع',
        addFirstBranch: 'إضافة أول فرع',
        editBranch: 'تعديل الفرع',
        branchDetails: 'تفاصيل الفرع',
        searchPlaceholder: 'البحث في الفروع...',
        status: 'الحالة',
        city: 'المدينة',
        allStatuses: 'جميع الحالات',
        allCities: 'جميع المدن',
        active: 'نشط',
        inactive: 'غير نشط',
        maintenance: 'صيانة',
        showingResults: 'عرض',
        of: 'من',
        branches: 'فرع',
        noBranchesFound: 'لم يتم العثور على فروع',
        noBranchesDescription: 'لا توجد فروع تطابق معايير البحث الخاصة بك',
        branchManager: 'مدير الفرع',
        operatingHours: 'ساعات العمل',
        name: 'اسم الفرع',
        address: 'العنوان',
        phone: 'الهاتف',
        email: 'البريد الإلكتروني',
        manager: 'المدير',
        country: 'البلد',
        coordinates: 'الإحداثيات',
        latitude: 'خط العرض',
        longitude: 'خط الطول',
        monday: 'الاثنين',
        tuesday: 'الثلاثاء',
        wednesday: 'الأربعاء',
        thursday: 'الخميس',
        friday: 'الجمعة',
        saturday: 'السبت',
        sunday: 'الأحد',
        isOpen: 'مفتوح',
        openTime: 'وقت الفتح',
        closeTime: 'وقت الإغلاق',
        getCurrentLocation: 'الحصول على الموقع الحالي',
        mapInstructions: 'انقر على الخريطة لتحديد الموقع'
      },
      // إدارة المركبات
      vehicles: {
        title: 'إدارة المركبات',
        subtitle: 'إدارة أسطول المركبات المؤجرة',
        addVehicle: 'إضافة مركبة',
        addFirstVehicle: 'إضافة أول مركبة',
        editVehicle: 'تعديل المركبة',
        vehicleDetails: 'تفاصيل المركبة',
        searchPlaceholder: 'البحث في المركبات...',
        category: 'الفئة',
        status: 'الحالة',
        make: 'الماركة',
        allCategories: 'جميع الفئات',
        allStatuses: 'جميع الحالات',
        allMakes: 'جميع الماركات',
        economy: 'اقتصادية',
        compact: 'مدمجة',
        midsize: 'متوسطة',
        fullsize: 'كبيرة',
        luxury: 'فاخرة',
        suv: 'دفع رباعي',
        van: 'فان',
        truck: 'شاحنة',
        available: 'متاحة',
        rented: 'مؤجرة',
        maintenance: 'صيانة',
        outOfService: 'خارج الخدمة',
        reserved: 'محجوزة',
        showingResults: 'عرض',
        of: 'من',
        vehicles: 'مركبة',
        noVehiclesFound: 'لم يتم العثور على مركبات',
        noVehiclesDescription: 'لا توجد مركبات تطابق معايير البحث الخاصة بك',
        gasoline: 'بنزين',
        diesel: 'ديزل',
        electric: 'كهربائية',
        hybrid: 'هجين',
        manual: 'يدوي',
        automatic: 'أوتوماتيك',
        seats: 'مقاعد',
        miles: 'ميل',
        dailyRate: 'السعر اليومي',
        weeklyRate: 'السعر الأسبوعي',
        monthlyRate: 'السعر الشهري',
        formComingSoon: 'نموذج المركبة قريباً',
        formComingSoonDesc: 'نموذج المركبة قيد التطوير وسيكون متاحاً قريباً.',
        detailComingSoon: 'تفاصيل المركبة قريباً',
        detailComingSoonDesc: 'عرض تفاصيل المركبة قيد التطوير وسيكون متاحاً قريباً.',
        addVehicleDesc: 'إضافة مركبة جديدة إلى أسطول التأجير',
        vehicleDetailsDesc: 'عرض معلومات مفصلة عن هذه المركبة',
        editVehicleDesc: 'تحديث معلومات ومواصفات المركبة',
        basicInformation: 'المعلومات الأساسية',
        basicInformationDesc: 'أدخل التفاصيل الأساسية عن المركبة',
        identification: 'التعريف',
        identificationDesc: 'أرقام تعريف المركبة والتسجيل',
        specifications: 'المواصفات',
        specificationsDesc: 'المواصفات التقنية والميزات',
        pricing: 'التسعير',
        pricingDesc: 'تحديد أسعار الإيجار لفترات مختلفة',
        documentation: 'الوثائق',
        documentationDesc: 'معلومات التأمين والتسجيل',
        additionalInfo: 'معلومات إضافية',
        additionalInfoDesc: 'ميزات إضافية وملاحظات',
        makePlaceholder: 'مثل: تويوتا، بي إم دبليو، مرسيدس',
        modelPlaceholder: 'مثل: كامري، X5، C-Class',
        yearPlaceholder: 'مثل: 2023',
        colorPlaceholder: 'مثل: أبيض، أسود، فضي',
        vinPlaceholder: 'رقم VIN المكون من 17 حرف',
        licensePlatePlaceholder: 'مثل: DXB-12345',
        seatsPlaceholder: 'عدد المقاعد',
        doorsPlaceholder: 'عدد الأبواب',
        mileagePlaceholder: 'المسافة المقطوعة بالكيلومتر',
        dailyRatePlaceholder: 'سعر الإيجار اليومي',
        weeklyRatePlaceholder: 'سعر الإيجار الأسبوعي (اختياري)',
        monthlyRatePlaceholder: 'سعر الإيجار الشهري (اختياري)',
        featuresPlaceholder: 'GPS، بلوتوث، مقاعد جلدية، إلخ',
        featuresHelp: 'افصل الميزات بفواصل',
        notesPlaceholder: 'ملاحظات إضافية عن المركبة',
        selectCategory: 'اختر الفئة',
        selectBranch: 'اختر الفرع',
        selectFuelType: 'اختر نوع الوقود',
        selectTransmission: 'اختر ناقل الحركة',
        insuranceExpiry: 'انتهاء التأمين',
        registrationExpiry: 'انتهاء التسجيل',
        branch: 'الفرع',
        vin: 'رقم الهيكل',
        doors: 'الأبواب',
        cvt: 'CVT',
        notes: 'ملاحظات',
        model: 'النوع',
        year: 'السنة',
        color: 'اللون',
        mileage: 'المسافة المقطوعة',
        licensePlate: 'رقم اللوحة',
        transmission: 'ناقل الحركة',
        fuelType: 'نوع الوقود',
        features: 'الميزات',
        images: 'الصور'
       
      },
      // إدارة الحجوزات
      bookings: {
        title: 'إدارة الحجوزات',
        subtitle: 'إدارة حجوزات العملاء والتأجير',
        newBooking: 'حجز جديد',
        createFirstBooking: 'إنشاء أول حجز',
        editBooking: 'تعديل الحجز',
        bookingDetails: 'تفاصيل الحجز',
        searchPlaceholder: 'البحث في الحجوزات...',
        status: 'الحالة',
        payment: 'الدفع',
        allStatuses: 'جميع الحالات',
        allPayments: 'جميع المدفوعات',
        pending: 'في الانتظار',
        confirmed: 'مؤكد',
        active: 'نشط',
        completed: 'مكتمل',
        cancelled: 'ملغي',
        no_show: 'لم يحضر',
        paymentPending: 'الدفع في الانتظار',
        partial: 'دفع جزئي',
        paid: 'مدفوع',
        refunded: 'مسترد',
        failed: 'فشل الدفع',
        showingResults: 'عرض',
        of: 'من',
        bookings: 'حجز',
        noBookingsFound: 'لم يتم العثور على حجوزات',
        noBookingsDescription: 'لا توجد حجوزات تطابق معايير البحث الخاصة بك',
        bookingsList: 'قائمة الحجوزات',
        calendar: 'التقويم',
        analytics: 'التحليلات',
        totalAmount: 'المبلغ الإجمالي',
        duration: 'المدة',
        days: 'أيام',
        pickup: 'الاستلام',
        dropoff: 'التسليم',
        additionalServices: 'الخدمات الإضافية',
        changeStatus: 'تغيير الحالة',
        confirm: 'تأكيد',
        activate: 'تفعيل',
        complete: 'إكمال',
        cancel: 'إلغاء',
        calendarComingSoon: 'عرض التقويم قريباً',
        calendarComingSoonDesc: 'عرض التقويم للحجوزات قيد التطوير.',
        bookingOverview: 'نظرة عامة على الحجوزات',
        totalBookings: 'إجمالي الحجوزات',
        activeBookings: 'الحجوزات النشطة',
        bookingStatus: 'حالة الحجز',
        revenue: 'الإيرادات',
        totalRevenue: 'إجمالي الإيرادات',
        pendingPayments: 'المدفوعات المعلقة',
        completion: 'الإكمال',
        newBookings: 'حجوزات جديدة',
        manageReservations: 'إدارة الحجوزات',
        customerInfo: 'معلومات العملاء',
        paymentTracking: 'تتبع المدفوعات',
        formComingSoon: 'نموذج الحجز قريباً',
        formComingSoonDesc: 'نموذج الحجز قيد التطوير وسيكون متاحاً قريباً.',
        detailComingSoon: 'تفاصيل الحجز قريباً',
        detailComingSoonDesc: 'عرض تفاصيل الحجز قيد التطوير وسيكون متاحاً قريباً.',
        newBookingDesc: 'إنشاء حجز تأجير جديد',
        bookingDetailsDesc: 'عرض معلومات مفصلة عن هذا الحجز'
      },

      // Advertisement Management
      advertisements: {
        title: 'إدارة الإعلانات',
        subtitle: 'إدارة الحملات الإعلانية والترويجية',
        addAdvertisement: 'إضافة إعلان',
        createFirstAdvertisement: 'إنشاء أول إعلان',
        searchPlaceholder: 'البحث في الإعلانات...',
        type: 'النوع',
        status: 'الحالة',
        allTypes: 'جميع الأنواع',
        allStatuses: 'جميع الحالات',
        banner: 'بانر',
        popup: 'نافذة منبثقة',
        sidebar: 'شريط جانبي',
        featured: 'مميز',
        promotion: 'ترويج',
        draft: 'مسودة',
        active: 'نشط',
        paused: 'متوقف',
        expired: 'منتهي الصلاحية',
        archived: 'مؤرشف',
        showingResults: 'عرض',
        of: 'من',
        advertisements: 'إعلان',
        noAdvertisementsFound: 'لم يتم العثور على إعلانات',
        noAdvertisementsDescription: 'لا توجد إعلانات تطابق معايير البحث الخاصة بك',
        duration: 'المدة',
        budget: 'الميزانية',
        targetUrl: 'الرابط المستهدف',
        impressions: 'المشاهدات',
        clicks: 'النقرات',
        conversions: 'التحويلات',
        ctr: 'معدل النقر',
        targetAudience: 'الجمهور المستهدف',
        years: 'سنة',
        male: 'ذكر',
        female: 'أنثى',
        activate: 'تفعيل',
        pause: 'إيقاف',
        resume: 'استئناف',
        archive: 'أرشفة'
      },
      // إدارة العملاء
      customers: {
        title: 'إدارة العملاء',
        subtitle: 'إدارة ملفات العملاء وتاريخ الإيجار',
        addCustomer: 'إضافة عميل',
        addFirstCustomer: 'إضافة أول عميل',
        editCustomer: 'تعديل العميل',
        customerDetails: 'تفاصيل العميل',
        searchPlaceholder: 'البحث في العملاء...',
        type: 'النوع',
        status: 'الحالة',
        allTypes: 'جميع الأنواع',
        allStatuses: 'جميع الحالات',
        regular: 'عادي',
        premium: 'مميز',
        corporate: 'شركات',
        active: 'نشط',
        inactive: 'غير نشط',
        blacklisted: 'في القائمة السوداء',
        showingResults: 'عرض',
        of: 'من',
        customers: 'عميل',
        noCustomersFound: 'لم يتم العثور على عملاء',
        noCustomersDescription: 'لا يوجد عملاء يطابقون معايير البحث الخاصة بك',
        customerList: 'قائمة العملاء',
        analytics: 'التحليلات',
        totalRentals: 'إجمالي الإيجارات',
        totalSpent: 'إجمالي المبلغ المنفق',
        loyaltyPoints: 'نقاط الولاء',
        rating: 'التقييم',
        license: 'الرخصة',
        location: 'الموقع',
        lastRental: 'آخر إيجار',
        member: 'عضو منذ',
        viewHistory: 'عرض التاريخ',
        activate: 'تفعيل',
        deactivate: 'إلغاء التفعيل',
        addBlacklist: 'إضافة للقائمة السوداء',
        removeBlacklist: 'إزالة من القائمة السوداء',
        rentalHistory: 'تاريخ الإيجار',
        noRentalHistory: 'لا يوجد تاريخ إيجار متاح',
        days: 'أيام',
        completed: 'مكتمل',
        cancelled: 'ملغي',
        customerOverview: 'نظرة عامة على العملاء',
        totalCustomers: 'إجمالي العملاء',
        activeCustomers: 'العملاء النشطون',
        customerTypes: 'أنواع العملاء',
        revenue: 'الإيرادات',
        totalRevenue: 'إجمالي الإيرادات',
        averageSpent: 'متوسط الإنفاق',
        issues: 'المشاكل',
        blacklistedCustomers: 'العملاء في القائمة السوداء',
        addCustomers: 'إضافة عملاء',
        customerProfiles: 'ملفات العملاء',
        contactInfo: 'معلومات الاتصال',
        formComingSoon: 'نموذج العميل قريباً',
        formComingSoonDesc: 'نموذج العميل قيد التطوير وسيكون متاحاً قريباً.',
        detailComingSoon: 'تفاصيل العميل قريباً',
        detailComingSoonDesc: 'عرض تفاصيل العميل قيد التطوير وسيكون متاحاً قريباً.',
        addCustomerDesc: 'إضافة عميل جديد إلى النظام',
        customerDetailsDesc: 'عرض معلومات مفصلة عن هذا العميل'
      },
      // الخدمات الإضافية
      services: {
        title: 'الخدمات الإضافية',
        subtitle: 'إدارة خدمات ومعدات التأجير الإضافية',
        addService: 'إضافة خدمة',
        addFirstService: 'إضافة أول خدمة',
        editService: 'تعديل الخدمة',
        serviceDetails: 'تفاصيل الخدمة',
        searchPlaceholder: 'البحث في الخدمات...',
        category: 'الفئة',
        availability: 'التوفر',
        allCategories: 'جميع الفئات',
        allAvailability: 'جميع حالات التوفر',
        navigation: 'الملاحة',
        safety: 'السلامة',
        comfort: 'الراحة',
        insurance: 'التأمين',
        equipment: 'المعدات',
        available: 'متاح',
        unavailable: 'غير متاح',
        showingResults: 'عرض',
        of: 'من',
        services: 'خدمة',
        noServicesFound: 'لم يتم العثور على خدمات',
        noServicesDescription: 'لا توجد خدمات تطابق معايير البحث الخاصة بك',
        maxQuantity: 'الحد الأقصى للكمية',
        units: 'وحدة',
        dailyRate: 'السعر اليومي',
        weeklyRate: 'السعر الأسبوعي',
        monthlyRate: 'السعر الشهري',
        gpsNavigation: 'نظام تحديد المواقع',
        childSeats: 'مقاعد الأطفال',
        formComingSoon: 'نموذج الخدمة قريباً',
        formComingSoonDesc: 'نموذج الخدمة قيد التطوير وسيكون متاحاً قريباً.',
        detailComingSoon: 'تفاصيل الخدمة قريباً',
        detailComingSoonDesc: 'عرض تفاصيل الخدمة قيد التطوير وسيكون متاحاً قريباً.',
        addServiceDesc: 'إضافة خدمة إضافية جديدة إلى عروض التأجير',
        serviceDetailsDesc: 'عرض معلومات مفصلة عن هذه الخدمة'
      },
      // مستخدمي الإدارة
      adminUsers: {
        title: 'إدارة المستخدمين الإداريين',
        subtitle: 'إدارة المستخدمين الإداريين والصلاحيات',
        addAdmin: 'إضافة مدير',
        addFirstAdmin: 'إضافة أول مدير',
        editAdmin: 'تعديل المدير',
        adminDetails: 'تفاصيل المدير',
        searchPlaceholder: 'البحث في المستخدمين الإداريين...',
        role: 'الدور',
        status: 'الحالة',
        allRoles: 'جميع الأدوار',
        allStatuses: 'جميع الحالات',
        superAdmin: 'مدير عام',
        branchManager: 'مدير فرع',
        staff: 'موظف',
        viewer: 'مشاهد',
        super_admin: 'مدير عام',
        branch_manager: 'مدير فرع',
        active: 'نشط',
        inactive: 'غير نشط',
        showingResults: 'عرض',
        of: 'من',
        users: 'مستخدم',
        noUsersFound: 'لم يتم العثور على مستخدمين إداريين',
        noUsersDescription: 'لا يوجد مستخدمين إداريين يطابقون معايير البحث الخاصة بك',
        adminUsers: 'المستخدمين الإداريين',
        activityLogs: 'سجلات الأنشطة',
        lastLogin: 'آخر تسجيل دخول',
        branches: 'الفروع',
        allBranches: 'جميع الفروع',
        joined: 'انضم في',
        permissions: 'الصلاحيات',
        noLogsFound: 'لم يتم العثور على سجلات أنشطة',
        noLogsDescription: 'لا توجد أنشطة حديثة للعرض',
        addAdmins: 'إضافة مديرين',
        roleManagement: 'إدارة الأدوار',
        formComingSoon: 'نموذج المدير قريباً',
        formComingSoonDesc: 'نموذج المستخدم الإداري قيد التطوير وسيكون متاحاً قريباً.',
        detailComingSoon: 'تفاصيل المدير قريباً',
        detailComingSoonDesc: 'عرض تفاصيل المستخدم الإداري قيد التطوير وسيكون متاحاً قريباً.',
        addAdminDesc: 'إضافة مستخدم إداري جديد إلى النظام',
        adminDetailsDesc: 'عرض معلومات مفصلة عن هذا المستخدم الإداري'
      }
    }
  };

  constructor() {
    // Load saved language from localStorage
    const savedLang = localStorage.getItem('nol-dashboard-language') as SupportedLanguage;
    if (savedLang && (savedLang === 'en' || savedLang === 'ar')) {
      this.currentLanguage.set(savedLang);
    }
    
    // Apply RTL/LTR direction
    this.updateDirection();
  }

  getCurrentLanguage(): SupportedLanguage {
    return this.currentLanguage();
  }

  setLanguage(language: SupportedLanguage): void {
    this.currentLanguage.set(language);
    localStorage.setItem('nol-dashboard-language', language);
    this.updateDirection();
  }

  translate(key: string): string {
    const keys = key.split('.');
    let value: any = this.translations[this.currentLanguage()];
    
    for (const k of keys) {
      if (value && typeof value === 'object' && k in value) {
        value = value[k];
      } else {
        return key; // Return key if translation not found
      }
    }
    
    return typeof value === 'string' ? value : key;
  }

  private updateDirection(): void {
    const direction = this.currentLanguage() === 'ar' ? 'rtl' : 'ltr';
    document.documentElement.dir = direction;
    document.documentElement.lang = this.currentLanguage();
  }

  isRTL(): boolean {
    return this.currentLanguage() === 'ar';
  }
}
