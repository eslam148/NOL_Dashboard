<div class="vehicle-form-container">
  <!-- Header -->
  <div class="page-header">
    <div class="flex items-center gap-4">
      <a routerLink="/car-rental/vehicles" class="btn btn-ghost btn-sm">
        <i class="bi bi-arrow-left"></i>
        {{ 'common.back' | translate }}
      </a>
      <div>
        <h1 class="page-title">
          {{ isEditMode() ? ('vehicles.editVehicle' | translate) : ('vehicles.addVehicle' | translate) }}
        </h1>
        <p class="page-subtitle">
          {{ isEditMode() ? ('vehicles.editVehicleDesc' | translate) : ('vehicles.addVehicleDesc' | translate) }}
        </p>
      </div>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading()">
    <div class="spinner"></div>
    <p class="text-muted">{{ 'common.loading' | translate }}</p>
  </div>

  <!-- Form -->
  <form [formGroup]="vehicleForm" (ngSubmit)="onSubmit()" *ngIf="!isLoading()">
    <div class="form-sections">
      
      <!-- Basic Information Section -->
      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-info-circle"></i>
            {{ 'vehicles.basicInformation' | translate }}
          </h2>
          <p class="section-description">{{ 'vehicles.basicInformationDesc' | translate }}</p>
        </div>
        
        <div class="form-grid">
          <!-- Brand Arabic -->
          <div class="form-group">
            <label class="form-label" for="brandAr">
              {{ 'vehicles.brandAr' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="brandAr"
              formControlName="brandAr"
              class="form-input"
              [class.error]="vehicleForm.get('brandAr')?.invalid && vehicleForm.get('brandAr')?.touched"
              [placeholder]="'vehicles.brandArPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('brandAr')?.invalid && vehicleForm.get('brandAr')?.touched">
              <span *ngIf="vehicleForm.get('brandAr')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('brandAr')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('brandAr')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Brand English -->
          <div class="form-group">
            <label class="form-label" for="brandEn">
              {{ 'vehicles.brandEn' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="brandEn"
              formControlName="brandEn"
              class="form-input"
              [class.error]="vehicleForm.get('brandEn')?.invalid && vehicleForm.get('brandEn')?.touched"
              [placeholder]="'vehicles.brandEnPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('brandEn')?.invalid && vehicleForm.get('brandEn')?.touched">
              <span *ngIf="vehicleForm.get('brandEn')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('brandEn')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('brandEn')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Model Arabic -->
          <div class="form-group">
            <label class="form-label" for="modelAr">
              {{ 'vehicles.modelAr' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="modelAr"
              formControlName="modelAr"
              class="form-input"
              [class.error]="vehicleForm.get('modelAr')?.invalid && vehicleForm.get('modelAr')?.touched"
              [placeholder]="'vehicles.modelArPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('modelAr')?.invalid && vehicleForm.get('modelAr')?.touched">
              <span *ngIf="vehicleForm.get('modelAr')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('modelAr')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('modelAr')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Model English -->
          <div class="form-group">
            <label class="form-label" for="modelEn">
              {{ 'vehicles.modelEn' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="modelEn"
              formControlName="modelEn"
              class="form-input"
              [class.error]="vehicleForm.get('modelEn')?.invalid && vehicleForm.get('modelEn')?.touched"
              [placeholder]="'vehicles.modelEnPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('modelEn')?.invalid && vehicleForm.get('modelEn')?.touched">
              <span *ngIf="vehicleForm.get('modelEn')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('modelEn')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('modelEn')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Year -->
          <div class="form-group">
            <label class="form-label" for="year">
              {{ 'vehicles.year' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="year"
              formControlName="year"
              class="form-input"
              [class.error]="vehicleForm.get('year')?.invalid && vehicleForm.get('year')?.touched"
              [min]="1900"
              [max]="2030">
            <div class="form-error" *ngIf="vehicleForm.get('year')?.invalid && vehicleForm.get('year')?.touched">
              <span *ngIf="vehicleForm.get('year')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('year')?.errors?.['min'] || vehicleForm.get('year')?.errors?.['max']">
                {{ 'validation.yearRange' | translate }}
              </span>
            </div>
          </div>

          <!-- Color Arabic -->
          <div class="form-group">
            <label class="form-label" for="colorAr">
              {{ 'vehicles.colorAr' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="colorAr"
              formControlName="colorAr"
              class="form-input"
              [class.error]="vehicleForm.get('colorAr')?.invalid && vehicleForm.get('colorAr')?.touched"
              [placeholder]="'vehicles.colorArPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('colorAr')?.invalid && vehicleForm.get('colorAr')?.touched">
              <span *ngIf="vehicleForm.get('colorAr')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('colorAr')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('colorAr')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Color English -->
          <div class="form-group">
            <label class="form-label" for="colorEn">
              {{ 'vehicles.colorEn' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="colorEn"
              formControlName="colorEn"
              class="form-input"
              [class.error]="vehicleForm.get('colorEn')?.invalid && vehicleForm.get('colorEn')?.touched"
              [placeholder]="'vehicles.colorEnPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('colorEn')?.invalid && vehicleForm.get('colorEn')?.touched">
              <span *ngIf="vehicleForm.get('colorEn')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('colorEn')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('colorEn')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Vehicle Specifications Section -->
      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-gear"></i>
            {{ 'vehicles.specifications' | translate }}
          </h2>
          <p class="section-description">{{ 'vehicles.specificationsDesc' | translate }}</p>
        </div>
        
        <div class="form-grid">
          <!-- Plate Number -->
          <div class="form-group">
            <label class="form-label" for="plateNumber">
              {{ 'vehicles.plateNumber' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="plateNumber"
              formControlName="plateNumber"
              class="form-input"
              [class.error]="vehicleForm.get('plateNumber')?.invalid && vehicleForm.get('plateNumber')?.touched"
              [placeholder]="'vehicles.plateNumberPlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('plateNumber')?.invalid && vehicleForm.get('plateNumber')?.touched">
              <span *ngIf="vehicleForm.get('plateNumber')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('plateNumber')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('plateNumber')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Seating Capacity -->
          <div class="form-group">
            <label class="form-label" for="seatingCapacity">
              {{ 'vehicles.seatingCapacity' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="seatingCapacity"
              formControlName="seatingCapacity"
              class="form-input"
              [class.error]="vehicleForm.get('seatingCapacity')?.invalid && vehicleForm.get('seatingCapacity')?.touched"
              [min]="1"
              [max]="20">
            <div class="form-error" *ngIf="vehicleForm.get('seatingCapacity')?.invalid && vehicleForm.get('seatingCapacity')?.touched">
              <span *ngIf="vehicleForm.get('seatingCapacity')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('seatingCapacity')?.errors?.['min'] || vehicleForm.get('seatingCapacity')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Number of Doors -->
          <div class="form-group">
            <label class="form-label" for="numberOfDoors">
              {{ 'vehicles.numberOfDoors' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="numberOfDoors"
              formControlName="numberOfDoors"
              class="form-input"
              [class.error]="vehicleForm.get('numberOfDoors')?.invalid && vehicleForm.get('numberOfDoors')?.touched"
              [min]="2"
              [max]="6">
            <div class="form-error" *ngIf="vehicleForm.get('numberOfDoors')?.invalid && vehicleForm.get('numberOfDoors')?.touched">
              <span *ngIf="vehicleForm.get('numberOfDoors')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('numberOfDoors')?.errors?.['min'] || vehicleForm.get('numberOfDoors')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Max Speed -->
          <div class="form-group">
            <label class="form-label" for="maxSpeed">
              {{ 'vehicles.maxSpeed' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="maxSpeed"
              formControlName="maxSpeed"
              class="form-input"
              [class.error]="vehicleForm.get('maxSpeed')?.invalid && vehicleForm.get('maxSpeed')?.touched"
              [min]="80"
              [max]="400">
            <div class="form-error" *ngIf="vehicleForm.get('maxSpeed')?.invalid && vehicleForm.get('maxSpeed')?.touched">
              <span *ngIf="vehicleForm.get('maxSpeed')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('maxSpeed')?.errors?.['min'] || vehicleForm.get('maxSpeed')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Engine -->
          <div class="form-group">
            <label class="form-label" for="engine">
              {{ 'vehicles.engine' | translate }} <span class="required">*</span>
            </label>
            <input
              type="text"
              id="engine"
              formControlName="engine"
              class="form-input"
              [class.error]="vehicleForm.get('engine')?.invalid && vehicleForm.get('engine')?.touched"
              [placeholder]="'vehicles.enginePlaceholder' | translate">
            <div class="form-error" *ngIf="vehicleForm.get('engine')?.invalid && vehicleForm.get('engine')?.touched">
              <span *ngIf="vehicleForm.get('engine')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('engine')?.errors?.['minlength']">
                {{ 'validation.minLength' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('engine')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Transmission Type -->
          <div class="form-group">
            <label class="form-label" for="transmissionType">
              {{ 'vehicles.transmissionType' | translate }} <span class="required">*</span>
            </label>
            <select
              id="transmissionType"
              formControlName="transmissionType"
              class="form-select"
              [class.error]="vehicleForm.get('transmissionType')?.invalid && vehicleForm.get('transmissionType')?.touched">
              <option value="">{{ 'common.selectOption' | translate }}</option>
              <option *ngFor="let type of transmissionTypes" [value]="type.value">
                {{ type.label | translate }}
              </option>
            </select>
            <div class="form-error" *ngIf="vehicleForm.get('transmissionType')?.invalid && vehicleForm.get('transmissionType')?.touched">
              <span *ngIf="vehicleForm.get('transmissionType')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
            </div>
          </div>

          <!-- Fuel Type -->
          <div class="form-group">
            <label class="form-label" for="fuelType">
              {{ 'vehicles.fuelType' | translate }} <span class="required">*</span>
            </label>
            <select
              id="fuelType"
              formControlName="fuelType"
              class="form-select"
              [class.error]="vehicleForm.get('fuelType')?.invalid && vehicleForm.get('fuelType')?.touched">
              <option value="">{{ 'common.selectOption' | translate }}</option>
              <option *ngFor="let type of fuelTypes" [value]="type.value">
                {{ type.label | translate }}
              </option>
            </select>
            <div class="form-error" *ngIf="vehicleForm.get('fuelType')?.invalid && vehicleForm.get('fuelType')?.touched">
              <span *ngIf="vehicleForm.get('fuelType')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
            </div>
          </div>

          <!-- Status -->
          <div class="form-group">
            <label class="form-label" for="status">
              {{ 'vehicles.status' | translate }}
            </label>
            <select
              id="status"
              formControlName="status"
              class="form-select">
              <option *ngFor="let status of statusOptions" [value]="status.value">
                {{ status.label | translate }}
              </option>
            </select>
          </div>
        </div>
      </div>

      <!-- Pricing Section -->
      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-currency-dollar"></i>
            {{ 'vehicles.pricing' | translate }}
          </h2>
          <p class="section-description">{{ 'vehicles.pricingDesc' | translate }}</p>
        </div>
        
        <div class="form-grid">
          <!-- Daily Rate -->
          <div class="form-group">
            <label class="form-label" for="dailyRate">
              {{ 'vehicles.dailyRate' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="dailyRate"
              formControlName="dailyRate"
              class="form-input"
              [class.error]="vehicleForm.get('dailyRate')?.invalid && vehicleForm.get('dailyRate')?.touched"
              step="0.01"
              [min]="0.01"
              [max]="10000">
            <div class="form-error" *ngIf="vehicleForm.get('dailyRate')?.invalid && vehicleForm.get('dailyRate')?.touched">
              <span *ngIf="vehicleForm.get('dailyRate')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('dailyRate')?.errors?.['min'] || vehicleForm.get('dailyRate')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Weekly Rate -->
          <div class="form-group">
            <label class="form-label" for="weeklyRate">
              {{ 'vehicles.weeklyRate' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="weeklyRate"
              formControlName="weeklyRate"
              class="form-input"
              [class.error]="vehicleForm.get('weeklyRate')?.invalid && vehicleForm.get('weeklyRate')?.touched"
              step="0.01"
              [min]="0.01"
              [max]="50000">
            <div class="form-error" *ngIf="vehicleForm.get('weeklyRate')?.invalid && vehicleForm.get('weeklyRate')?.touched">
              <span *ngIf="vehicleForm.get('weeklyRate')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('weeklyRate')?.errors?.['min'] || vehicleForm.get('weeklyRate')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Monthly Rate -->
          <div class="form-group">
            <label class="form-label" for="monthlyRate">
              {{ 'vehicles.monthlyRate' | translate }} <span class="required">*</span>
            </label>
            <input
              type="number"
              id="monthlyRate"
              formControlName="monthlyRate"
              class="form-input"
              [class.error]="vehicleForm.get('monthlyRate')?.invalid && vehicleForm.get('monthlyRate')?.touched"
              step="0.01"
              [min]="0.01"
              [max]="200000">
            <div class="form-error" *ngIf="vehicleForm.get('monthlyRate')?.invalid && vehicleForm.get('monthlyRate')?.touched">
              <span *ngIf="vehicleForm.get('monthlyRate')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
              <span *ngIf="vehicleForm.get('monthlyRate')?.errors?.['min'] || vehicleForm.get('monthlyRate')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Location & Categories Section -->
      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-geo-alt"></i>
            {{ 'vehicles.locationCategories' | translate }}
          </h2>
          <p class="section-description">{{ 'vehicles.locationCategoriesDesc' | translate }}</p>
        </div>
        
        <div class="form-grid">
          <!-- Category -->
          <div class="form-group">
            <label class="form-label" for="categoryId">
              {{ 'vehicles.category' | translate }} <span class="required">*</span>
            </label>
            <select
              id="categoryId"
              formControlName="categoryId"
              class="form-select"
              [class.error]="vehicleForm.get('categoryId')?.invalid && vehicleForm.get('categoryId')?.touched">
              <option value="">{{ 'common.selectOption' | translate }}</option>
              <option *ngFor="let category of categories" [value]="category.value">
                {{ category.label | translate }}
              </option>
            </select>
            <div class="form-error" *ngIf="vehicleForm.get('categoryId')?.invalid && vehicleForm.get('categoryId')?.touched">
              <span *ngIf="vehicleForm.get('categoryId')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
            </div>
          </div>

          <!-- Branch -->
          <div class="form-group">
            <label class="form-label" for="branchId">
              {{ 'vehicles.branch' | translate }} <span class="required">*</span>
            </label>
            <select
              id="branchId"
              formControlName="branchId"
              class="form-select"
              [class.error]="vehicleForm.get('branchId')?.invalid && vehicleForm.get('branchId')?.touched">
              <option value="">{{ 'common.selectOption' | translate }}</option>
              <option *ngFor="let branch of branches()" [value]="branch.id">
                {{ branch.name }}
              </option>
            </select>
            <div class="form-error" *ngIf="vehicleForm.get('branchId')?.invalid && vehicleForm.get('branchId')?.touched">
              <span *ngIf="vehicleForm.get('branchId')?.errors?.['required']">
                {{ 'validation.required' | translate }}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Additional Information Section -->
      <div class="form-section">
        <div class="section-header">
          <h2 class="section-title">
            <i class="bi bi-info-square"></i>
            {{ 'vehicles.additionalInformation' | translate }}
          </h2>
          <p class="section-description">{{ 'vehicles.additionalInformationDesc' | translate }}</p>
        </div>
        
        <div class="form-grid">
          <!-- Vehicle Image Upload -->
          <div class="form-group full-width">
            <app-image-upload
              formControlName="imageUrl"
              [config]="imageUploadConfig"
              [disabled]="isSubmitting() || isUploadingImage()"
              [errorMessage]="uploadError()"
              (filesSelected)="onImageFilesSelected($event)"
              (fileRemoved)="onImageFileRemoved($event)"
              (uploadError)="onImageUploadError($event)">
            </app-image-upload>
          </div>

          <!-- Description Arabic -->
          <div class="form-group full-width">
            <label class="form-label" for="descriptionAr">
              {{ 'vehicles.descriptionAr' | translate }}
            </label>
            <textarea
              id="descriptionAr"
              formControlName="descriptionAr"
              class="form-textarea"
              rows="3"
              [class.error]="vehicleForm.get('descriptionAr')?.invalid && vehicleForm.get('descriptionAr')?.touched"
              [placeholder]="'vehicles.descriptionArPlaceholder' | translate">
            </textarea>
            <div class="form-error" *ngIf="vehicleForm.get('descriptionAr')?.invalid && vehicleForm.get('descriptionAr')?.touched">
              <span *ngIf="vehicleForm.get('descriptionAr')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Description English -->
          <div class="form-group full-width">
            <label class="form-label" for="descriptionEn">
              {{ 'vehicles.descriptionEn' | translate }}
            </label>
            <textarea
              id="descriptionEn"
              formControlName="descriptionEn"
              class="form-textarea"
              rows="3"
              [class.error]="vehicleForm.get('descriptionEn')?.invalid && vehicleForm.get('descriptionEn')?.touched"
              [placeholder]="'vehicles.descriptionEnPlaceholder' | translate">
            </textarea>
            <div class="form-error" *ngIf="vehicleForm.get('descriptionEn')?.invalid && vehicleForm.get('descriptionEn')?.touched">
              <span *ngIf="vehicleForm.get('descriptionEn')?.errors?.['maxlength']">
                {{ 'validation.maxLength' | translate }}
              </span>
            </div>
          </div>

          <!-- Mileage -->
          <div class="form-group">
            <label class="form-label" for="mileage">
              {{ 'vehicles.mileage' | translate }}
            </label>
            <input
              type="number"
              id="mileage"
              formControlName="mileage"
              class="form-input"
              [class.error]="vehicleForm.get('mileage')?.invalid && vehicleForm.get('mileage')?.touched"
              [min]="0"
              [max]="1000000">
            <div class="form-error" *ngIf="vehicleForm.get('mileage')?.invalid && vehicleForm.get('mileage')?.touched">
              <span *ngIf="vehicleForm.get('mileage')?.errors?.['min'] || vehicleForm.get('mileage')?.errors?.['max']">
                {{ 'validation.range' | translate }}
              </span>
            </div>
          </div>

          <!-- Features -->
          <div class="form-group">
            <label class="form-label" for="features">
              {{ 'vehicles.features' | translate }}
            </label>
            <textarea
              id="features"
              formControlName="features"
              class="form-textarea"
              rows="2"
              [placeholder]="'vehicles.featuresPlaceholder' | translate">
            </textarea>
          </div>
        </div>
      </div>
    </div>

    <!-- Form Actions -->
    <div class="form-actions">
      <button type="button" class="btn btn-secondary" routerLink="/car-rental/vehicles">
        {{ 'common.cancel' | translate }}
      </button>
      <button 
        type="submit" 
        class="btn btn-primary"
        [disabled]="vehicleForm.invalid || isSubmitting()"
        [class.loading]="isSubmitting()">
        <span *ngIf="!isSubmitting()">
          {{ isEditMode() ? ('common.update' | translate) : ('common.create' | translate) }}
        </span>
        <span *ngIf="isSubmitting()" class="flex items-center gap-2">
          <div class="spinner-sm"></div>
          {{ 'common.saving' | translate }}
        </span>
      </button>
    </div>
  </form>
</div>